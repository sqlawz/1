Настройку делаем на HQ-SRV

Скачиваем пакет bind9

`apt install bind9 -y`

# Основная конфигурация

`nano /etc/bind/named.conf.options`

![image](https://github.com/user-attachments/assets/f3b11d11-b1ef-48b0-8fb3-c2a4ea0ceb7d)

# Обозначение зон

`nano /etc/bind/named.conf.default-zones`

Удаляем или комментируем имеющиеся зоны и добавляем свои.

### Вариант 1

![image](https://github.com/user-attachments/assets/72c8b4b4-3dae-46f3-95f5-f1e02b2940b7)

zone "au-team.irpo" {

        type master;
        
        file "/etc/bind/au-team.db";
        
};


zone "100.168.192.in-addr.arpa"{

        type master;
        
        file "/etc/bind/au-team_rev.db";
        
};


zone "200.168.192.ip-addr.arpa"{

        type master;
        
        file "/etc/bind/au-team_rev2.db";
        
};



# Настройка зон

Копируем шаблоны для зон из существующего файла

`cp /etc/bind/db.empty /etc/bind/au-team.irpo`

`cp /etc/bind/db.empty /etc/bind/100.168.192.in-addr.arpa`

`cp /etc/bind/db.empty /etc/bind/200.168.192.in-addr.arpa`

`cp /etc/bind/db.empty /etc/bind/0.168.192.in-addr.arpa`

Перейдём к редактированию конфигов

`nano /etc/bind/au-team.irpo`

### Вариант 1

![{B21AD2FA-7CE8-4339-8D58-9A8BAA518C0F}](https://github.com/user-attachments/assets/6b890a97-0e86-4ef6-9be9-eac6367230b1)

`nano /etc/bind/100.168.192.in-addr.arpa`

![image](https://github.com/user-attachments/assets/04177f8b-ebb7-49ce-b7f2-f59b8d2d7290)

`nano /etc/bind/200.168.192.in-addr.arpa`

![image](https://github.com/user-attachments/assets/f123c940-7d05-47a3-b426-d3737ecceba4)

`nano /etc/bind/0.168.192.in-addr.arpa`

<img width="802" height="602" alt="image" src="https://github.com/user-attachments/assets/b14f44f6-5a18-4ef1-ba4b-6f7ff0d2a87c" />

# Проверка конфигураций

`named-checkconf -z`

![image](https://github.com/user-attachments/assets/fe2a6d4b-b88a-44b9-ab28-019434b934b3)

`systemctl restart bind9`

# Настройка на ВСЕХ машинах, кроме ISP

Стираем всё и прописываем ip-адрес сервера, на котором настроили DNS, в нашем случае HQ-SRV

`nano /etc/resolv.conf`

### Вариант 1

![image](https://github.com/user-attachments/assets/4a4ac688-093f-4937-8e17-37b716f2373a)

`systemctl restart networking`

# Проверка

Проверку прямой зоны производим путём ввода команды `host` и полного доменного имени устройства, обратную проверяем с вводом ip-адреса устройства.

Прямая:

![image](https://github.com/user-attachments/assets/62577dbb-c90b-49c4-ac8e-58c6edce247b)

Обратная:

![image](https://github.com/user-attachments/assets/69b1f6c2-5fee-4588-af87-7b41d63a1372)















