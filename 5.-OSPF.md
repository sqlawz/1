# HQ-RTR
Устанавливаем, при необходимости, frr.

`apt install frr -y`

Далее, включаем OSPF, поменяв значение "no" на "yes".

`nano /etc/frr/daemons`

![image](https://github.com/user-attachments/assets/a80c7d42-be5c-4427-a6e7-71cfb066aaf4)

Добавляем frr в автозагрузку.

`systemctl enable frr`

Перезагружаем frr.

`systemctl restart frr`

Зайдем в frr, введя команду `vtysh`. Далее, переходим в `conf t`, пропишем `ip forwarding` и затем в `router ospf`.
Прописываем следующие команды:

`passive-interface default`

`network 192.168.100.0/26 area 0`

`network 192.168.200.0/28 area 0`

`network 10.10.0.0/30 area 0`

`area 0 authentication`

`exit`

`interface tun1`

`no ip ospf network broadcast`

`no ip ospf passive`

`ip ospf authentication`

`ip ospf authentication-key password`

`exit`

`do write` - САМОЕ ГЛАВНОЕ, ОНА СОХРАНЯЕТ КОНФИГ. БЕЗ НЕЕ БУДЕТ СБРОС ВЫШЕУПОМЯНУТЫХ КОМАНД!

Выходим из frr командой `exit` и перезапускаем службу `systemctl restart frr`

# BR-RTR

Аналогично, устанавливаем, при необходимости, frr.

`apt install frr -y`

Далее, включаем OSPF, поменяв значение "no" на "yes".

`nano /etc/frr/daemons`

![image](https://github.com/user-attachments/assets/a80c7d42-be5c-4427-a6e7-71cfb066aaf4)

Добавляем frr в автозагрузку.

`systemctl enable frr`

Перезагружаем frr.

`systemctl restart frr`

Зайдем в frr, введя команду `vtysh`. Далее, переходим в `conf t`, пропишем `ip forwarding` и затем в `router ospf`.
Прописываем следующие команды:

`passive-interface default`

`network 192.168.0.0/27 area 0`

`network 10.10.0.0/30 area 0`

`area 0 authentication`

`exit`

`interface tun1`

`no ip ospf network broadcast`

`no ip ospf passive`

`ip ospf authentication`

`ip ospf authentication-key password`

`exit`

`do write` - САМОЕ ГЛАВНОЕ, ОНА СОХРАНЯЕТ КОНФИГ. БЕЗ НЕЕ БУДЕТ СБРОС ВЫШЕУПОМЯНУТЫХ КОМАНД!

Выходим из frr командой `exit` и перезапускаем службу `systemctl restart frr`

Проверка. Пингуем BR-SRV с HQ-SRV.

![{34B28871-7773-445D-9A0F-D331BF3C6FFB}](https://github.com/user-attachments/assets/47f77c50-dea2-425a-93b0-e26b36e52003)
