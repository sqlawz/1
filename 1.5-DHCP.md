# HQ-RTR

Устанавливаем DHCP сервер, при необходимости:

`apt install isc-dhcp-server -y`

Будет много красных строк, не пугаемся, это служба пыталась запуститься, но без правильной настройки конфига она не запустится.

Переходим в `nano /etc/default/isc-dhcp-server` и в строчке `INTERFACESv4=` прописываем интерфейс, КОТОРЫЙ ИДЕТ В СТОРОНУ HQ-CLI!! (в моем случае ens34:1).

![{E14E7340-87AB-40EB-9E70-9F400A516413}](https://github.com/user-attachments/assets/7e5991b0-3654-4a1a-96a7-ef566bc4a431)

Далее, переходим в `nano /etc/dhcp/dhcpd.conf`, комментируем все белые строки и прописываем следующее.

### Вариант 1

![{9D139C70-58C5-4B69-B13D-9E2E83FA6681}](https://github.com/user-attachments/assets/87f44b2e-180c-47cb-91ac-ce59aa4c451a)

### Вариант 2

![{8CA37D46-A3DC-4BBF-8A42-8C4B1A6040F9}](https://github.com/user-attachments/assets/3268b95d-cbda-4f08-95d4-0a8778306d5d)

Перезагружаем службу `systemctl restart isc-dhcp-server` и проверяем статус, в случае если не было ошибки о неудачном запуске DHCP, `systemctl status isc-dhcp-server`. Видим зеленую строку `active (running)`, служба запущена.

Проверим выдачу ip-адреса на HQ-CLI. Перейдем в терминал, заходим на root `su root`, пишем `systemctl restart networking` и проверяем ip-адрес `ip -br a`

![{2511C010-7F32-40AA-B58F-59BA16FA9315}](https://github.com/user-attachments/assets/9d8e41e9-9e58-4515-bc6c-d6885b94a120)

Готово. IP-адрес был выдан автоматически.

❗❗❗ МОЖЕТ ВЫДАВАТЬСЯ IP ЕЩЁ И НА HQ-SRV, ПРОВЕРЬТЕ ЧТОБЫ НЕ БЫЛО 2 АДРЕСА, ПЕРЕЗАПУСТИЕ NETWORKING НА HQ-SRV ❗❗❗