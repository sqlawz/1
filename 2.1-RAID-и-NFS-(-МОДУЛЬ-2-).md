# RAID

Устанавливаем утилиту `mdadm`

`apt install mdadm`

Выведем список дисков командой `lsblk`

![{56466168-D954-42D8-A134-1D823B0E4C9C}](https://github.com/user-attachments/assets/8ff6de67-ed07-4493-b74f-f8675aaae463)

Разбиваем каждый по отдельности на разделы командой `fdisk /dev/*название диска*`, возьмём в пример `sdb`, везде кроме подчёркнутых строк жмём `Enter`

![{31886441-69E6-4465-8F80-F9CD471F6AE6}](https://github.com/user-attachments/assets/d1fec39f-61e8-452e-b440-b7080a1d0cf6)

Проверяем созданные разделы командой `lsblk`

![{378E0FAD-12D9-48AC-B6F0-ABF2332B51DB}](https://github.com/user-attachments/assets/198e4728-1b3b-4b37-9d51-8c458ade8932)

Создаём raid-массив командой `mdadm --create --verbose /dev/md0 -l 5 -n 3 /dev/sdb1 /dev/sdc1 /dev/sdd1`

![{5D55765D-B704-499E-B7FA-C6E46B8BA122}](https://github.com/user-attachments/assets/593a7ae4-d379-4277-a39c-38897e7b7554)

Проверяем созданный raid командой `lsblk`

![{9FFC4A72-5B0C-4456-950D-7C9B9CA835DF}](https://github.com/user-attachments/assets/d4f28081-7c4b-489b-8512-c75abeed1967)

Сохраняем конфигурацию массива

`mdadm --detail --scan --verbose >> /etc/mdadm.conf`

Форматируем разделы 

`mkfs.ext4 /dev/md0`

Создаём директорию `raid5`

`mkdir /raid5`

Монтируем к raid директорию

`mount /dev/md0 /raid5`

Проверяем командой `lsblk -f`

![{F48F5054-0D86-471C-B682-61AC54AB083C}](https://github.com/user-attachments/assets/c018d863-a46f-4362-aac3-9e789832fbb8)

Чтобы разделы монтировались при загрузке системы, добавляем в `fstab` следующее

`nano /etc/fstab`

![{9657BC7B-A4ED-47AC-B612-274F906C375E}](https://github.com/user-attachments/assets/b8f3a4c9-7bb6-464b-96aa-33b1651f3536)

Проверяем примонтированные разделы командой `df -h`

![{DBDFBD84-B9ED-43AD-B694-2621B4F26993}](https://github.com/user-attachments/assets/23bca366-8336-448b-b7d2-cba86d2f0c27)

# NFS server 

Устанавливаем `nfs-kernel-server`

`apt install nfs-kernel-server`

Создадим папку общего доступа

`mkdir /raid5/nfs`

Создаём шару в конфиге `/etc/exports`

`nano /etc/exports`

![{914A6305-9C19-4B9D-9A83-306E6D154B7B}](https://github.com/user-attachments/assets/eb91b8bd-fd6d-4bb7-8cd9-d516f619e8ab)

Экспортируем данные

`exportfs -a`

# NFS client ( HQ-CLI )

`su root`

`apt install nfs-common`

Создаём директорию для монтирования

`mkdir /mnt/nfs`

Монтируем шару 

`mount -t nfs 192.168.100.2:/raid5/nfs /mnt/nfs`

Настроим автоматическое монтирование в `fstab`

`nano /etc/fstab`

![{A2ACE1C9-6770-465B-8C81-5BD22D24C605}](https://github.com/user-attachments/assets/be6f42a1-b99e-4bd5-81e7-ffd00c5e6bfb)

Проверка командой `df -h`

![{158F7E96-5F2F-437E-8B8F-FEA780DE112D}](https://github.com/user-attachments/assets/a894e095-11fd-4290-8cd8-f5b69916b5ba)



