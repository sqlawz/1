# Топология

### Вариант 1

![{332CE665-ECAD-4711-B59D-7D4482F2625B}](https://github.com/user-attachments/assets/f5e986a2-43d0-4ec2-9ecb-e250074ae673)


# Комментирование стандартной конфигурации

`nano /etc/network/interfaces`

закомменчиваем выделенные строки на всех машинах

![{8A4FE679-B5D6-48A3-8B59-0C9C1655A459}](https://github.com/user-attachments/assets/b17d8112-4fdd-4800-b752-6af4c6e5e9d3)

***
❗❗❗ После редактирования конфигурации интерфейсов ВСЕГДА перезапускаем службу `networking` ❗❗❗

`systemctl restart networking`
***

# ISP

### Вариант 1

![{DEAF7FDA-58D9-4DF7-84F7-A548D85B093B}](https://github.com/user-attachments/assets/bfb19835-d3cf-4bba-83d0-43e0608d2f7d)

allow-hotplug ens192

iface ens192 inet dhcp


auto ens224

iface ens224 inet static

address 172.16.4.1/28


auto ens256

iface ens256 inet static

address 172.16.5.1/28

# HQ-RTR

### Вариант 1

![{36A11C68-7B2A-4E62-8906-C4D0BB063691}](https://github.com/user-attachments/assets/7eaa4b1c-c902-470a-a200-466dba16f400)


allow-hotplug ens192 

iface ens192 inet static 

address 172.16.4.2/28 

gateway 172.16.4.1


auto ens224

iface ens224 inet static

address 192.168.100.1/26


auto ens224:1

iface ens224:1 inet static

address 192.168.200.1/28


auto ens224:2

iface ens224:2 inet static

address 192.168.99.99/29


auto ens224.100

iface ens224.100 inet manual

vlan-raw-device ens224


auto ens224.200

iface ens224.200 inet manual

vlan-raw-device ens224:1


auto ens224.999

iface ens224.999 inet manual

vlan-raw-device ens224:2


auto tun1

iface tun1 inet tunnel

address 10.10.0.1

netmask 255.255.255.252

mode gre

local 172.16.4.2

endpoint 172.16.5.2

ttl 64


# BR-RTR

### Вариант 1

![{650B2F59-21D6-4D19-AD49-7994C8F81402}](https://github.com/user-attachments/assets/9dfd6632-0e95-44fc-bf72-0630d91fa74d)

allow-hotplug ens192

iface ens192 inet static

address 172.16.5.2/28

gateway 172.16.5.1


auto ens224

iface ens224 inet static

address 192.168.0.1/27


auto tun1

iface tun1 inet tunnel

address 10.10.0.2

netmask 255.255.255.252

mode gre

local 172.16.5.2

endpoint 172.16.4.2

ttl 64

# HQ-SRV

### Вариант 1

![{A3A9AEB8-9A23-40AA-B26D-CA11715791FC}](https://github.com/user-attachments/assets/35dba2a6-e6fa-41dd-a21f-4b3efe70d72a)

auto ens192

iface ens192 inet static

address 192.168.100.2/26

gateway 192.168.100.1


# BR-SRV

### Вариант 1

![{FEBBACC2-9AC4-4B35-8E34-E3E42DAD8D03}](https://github.com/user-attachments/assets/a5ccf264-c835-4468-b9eb-cb12b04dbf1b)

allow-hotplug ens192

iface ens192 inet static

address 192.168.0.2/28

gateway 192.168.0.1


# HQ-CLI

sudo su


